<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR Duplex Sheet Maker</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1 data-i18n="title">QR Duplex Sheet Maker</h1>
      <div class="language-selector">
        <button id="lang-en" class="lang-btn active">English</button>
        <button id="lang-es" class="lang-btn">Español</button>
      </div>
    </header>

    <main>
      <!-- Upload Section -->
      <section class="card">
        <h2 data-i18n="upload_title">1. Upload QR Image</h2>
        <div class="upload-area">
          <input type="file" id="imageInput" accept="image/png,image/jpeg,image/jpg">
          <label for="imageInput" class="upload-label" data-i18n="upload_label">Choose PNG or JPG file</label>
          <div id="preview" class="preview"></div>
        </div>
      </section>

      <!-- Page Settings -->
      <section class="card">
        <h2 data-i18n="settings_title">2. Page Settings</h2>

        <div class="form-grid">
          <div class="form-group">
            <label data-i18n="paper_size">Paper Size</label>
            <select id="paperSize">
              <option value="A4">A4 (210×297mm)</option>
              <option value="A3">A3 (297×420mm)</option>
            </select>
          </div>

          <div class="form-group">
            <label data-i18n="orientation">Orientation</label>
            <select id="orientation">
              <option value="Portrait" data-i18n="portrait">Portrait</option>
              <option value="Landscape" data-i18n="landscape">Landscape</option>
            </select>
          </div>

          <div class="form-group">
            <label data-i18n="rows">Rows</label>
            <input type="number" id="rows" value="3" min="1" max="10">
          </div>

          <div class="form-group">
            <label data-i18n="columns">Columns</label>
            <input type="number" id="cols" value="3" min="1" max="10">
          </div>

          <div class="form-group">
            <label data-i18n="margin_top">Margin Top (mm)</label>
            <input type="number" id="marginTop" value="10" min="0" max="50">
          </div>

          <div class="form-group">
            <label data-i18n="margin_right">Margin Right (mm)</label>
            <input type="number" id="marginRight" value="10" min="0" max="50">
          </div>

          <div class="form-group">
            <label data-i18n="margin_bottom">Margin Bottom (mm)</label>
            <input type="number" id="marginBottom" value="10" min="0" max="50">
          </div>

          <div class="form-group">
            <label data-i18n="margin_left">Margin Left (mm)</label>
            <input type="number" id="marginLeft" value="10" min="0" max="50">
          </div>

          <div class="form-group">
            <label data-i18n="gutter">Gutter Spacing (mm)</label>
            <input type="number" id="gutter" value="8" min="0" max="20">
          </div>

          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="cropMarks" checked>
              <span data-i18n="crop_marks">Crop Marks</span>
            </label>
          </div>
        </div>
      </section>

      <!-- Printer Presets -->
      <section class="card">
        <h2 data-i18n="presets_title">Printer Presets</h2>

        <div class="presets-controls">
          <div class="form-group">
            <label data-i18n="select_preset">Select preset</label>
            <select id="presetSelect">
              <option value="">-- Select preset --</option>
            </select>
          </div>

          <div class="form-group">
            <label data-i18n="preset_name">Preset name</label>
            <input type="text" id="presetName" placeholder="My Printer Setup">
          </div>

          <div class="preset-buttons">
            <button id="savePresetBtn" class="btn-secondary" data-i18n="save_preset">Save as preset</button>
            <button id="updatePresetBtn" class="btn-secondary" data-i18n="update_preset">Update preset</button>
            <button id="deletePresetBtn" class="btn-secondary btn-danger" data-i18n="delete_preset">Delete preset</button>
          </div>

          <div class="preset-import-export">
            <button id="exportPresetsBtn" class="btn-link" data-i18n="export_presets">Export presets</button>
            <label for="importPresetsFile" class="btn-link" data-i18n="import_presets">Import presets</label>
            <input type="file" id="importPresetsFile" accept="application/json" style="display: none;">
          </div>
        </div>
      </section>

      <!-- Duplex Backside Settings -->
      <section class="card">
        <h2 data-i18n="duplex_title">3. Duplex Backside Settings</h2>

        <div class="info-box">
          <p data-i18n="calibration_note">
            Print double-sided and test "flip on short edge" vs "flip on long edge".
            Use Backside Transform + Offsets to calibrate: print on plain paper, hold to light, adjust, and repeat until aligned.
          </p>
        </div>

        <!-- Print Assistant -->
        <div class="helper-section">
          <h3 data-i18n="helper_title">Print Assistant</h3>
          <div class="form-group">
            <label data-i18n="flip_mode">I will print double-sided using</label>
            <select id="flipMode">
              <option value="auto" data-i18n="flip_auto">Auto-detect</option>
              <option value="short" data-i18n="flip_short_edge">Flip on short edge</option>
              <option value="long" data-i18n="flip_long_edge">Flip on long edge</option>
            </select>
          </div>
          <p class="helper-hint" data-i18n="helper_hint">
            Based on your selection, we recommend the backside transform below. Adjust if needed.
          </p>
        </div>

        <!-- Troubleshooting -->
        <details class="troubleshooting">
          <summary data-i18n="troubleshooting_title">Troubleshooting</summary>
          <ul>
            <li data-i18n="trouble_mirrored">Back is mirrored → Try "Mirror Horizontally" or "Rotate 180° + Mirror H"</li>
            <li data-i18n="trouble_upside_down">Back is upside down → Try "Rotate 180°"</li>
            <li data-i18n="trouble_shifted">Back is shifted → Adjust Offset X/Y</li>
          </ul>
        </details>

        <div class="form-grid">
          <div class="form-group">
            <label data-i18n="backside_transform">Backside Transform</label>
            <select id="backsideTransform">
              <option value="None" data-i18n="transform_none">None</option>
              <option value="MirrorH" data-i18n="transform_mirror_h">Mirror Horizontally</option>
              <option value="MirrorV" data-i18n="transform_mirror_v">Mirror Vertically</option>
              <option value="Rotate180" data-i18n="transform_rotate_180" selected>Rotate 180°</option>
              <option value="Rotate180MirrorH" data-i18n="transform_rotate_mirror">Rotate 180° + Mirror H</option>
            </select>
          </div>

          <div class="form-group">
            <label data-i18n="backside_offset_x">Backside Offset X (mm)</label>
            <input type="number" id="backsideOffsetX" value="0" step="0.1" min="-50" max="50">
          </div>

          <div class="form-group">
            <label data-i18n="backside_offset_y">Backside Offset Y (mm)</label>
            <input type="number" id="backsideOffsetY" value="0" step="0.1" min="-50" max="50">
          </div>
        </div>

        <!-- Calibration Mode -->
        <div class="calibration-section">
          <label class="checkbox-label">
            <input type="checkbox" id="calibrationMode">
            <span data-i18n="calibration_mode">Calibration Mode</span>
          </label>
          <p class="calibration-hint" data-i18n="calibration_hint">
            Generate a test pattern instead of QR codes to calibrate your printer alignment.
          </p>
        </div>
      </section>

      <!-- Generate Button -->
      <section class="card">
        <button id="generateBtn" class="generate-btn" disabled>
          <span data-i18n="generate_pdf">Generate PDF</span>
        </button>
        <div id="status" class="status"></div>
      </section>
    </main>

    <footer>
      <p data-i18n="footer">Made with pdf-lib • Open Source</p>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
